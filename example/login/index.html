<!DOCTYPE html>
<!--[if lt IE 7]><html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html lang="en" class="no-js lt-ie9 lt-ie8"><![endif]-->
<!--[if IE 8]><html lang="en" class="no-js lt-ie9"><![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en" class="no-js"><!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <title>Stormpath Widget - Login Example</title>
    <script src="/js/app.js"></script>
    <script>
      console.log('Loaded Stormpath v%s.', Stormpath.version);

      function createButton(text, onClickHandler) {
          var buttonElement = document.createElement('button');

          buttonElement.innerHTML = text;

          if (onClickHandler) {
            buttonElement.addEventListener('click', onClickHandler);
          }

          return buttonElement;
      }

      function onDocumentReady() {
        var stormpath = new Stormpath({
          authStrategy: 'token',
          // Robert's app: 'https://lawful-heron.apps.stormpath.io'
          // Robin's app: 'https://oval-summer.apps.dev.stormpath.io'
          appUri: 'https://lawful-heron.apps.stormpath.io'
        });

        stormpath.once('authenticated', () => {
          console.log('We\'re authenticated!');
        });

        stormpath.once('unauthenticated', () => {
          console.log('We\'re not authenticated. Showing login/registration options.');

          var loginButton = createButton('Login', function () {
            stormpath.showLogin();
          });

          document.body.appendChild(loginButton);

          var registrationButton = createButton('Registration', function () {
            stormpath.showRegistration();
          });

          document.body.appendChild(registrationButton);
        });

        stormpath.once('registered', function (account) {
          console.log('User just created a new account!', account);
        });

        stormpath.once('loggedIn', function (account) {
          console.log('User just logged in!', account);
        });

        stormpath.once('loggedOut', function () {
          console.log('User just logged out!');
        });

        //authenticated
        //unauthenticated
        //loggedIn
        //loggedOut
        //registered
      }

      window.onload = onDocumentReady;
    </script>
  </head>
  <body>
    <!--button id="login-button">Login</button-->
  </body>
</html>
